<MyScreenManager>:
    MainScreen:

<MainScreen>:
    name: 'main'
    image_display: image_display
    slider1: slider1
    slider2: slider2

    BoxLayout:
        orientation: 'horizontal'
        padding: 10
        spacing: 10

        # Left Panel: Original Image and Action Buttons
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.4
            spacing: 10

            Label:
                text: 'Original Image'
                size_hint_y: None
                height: 30

            Image:
                id: initial_image_display
                source: 'IMG_1415.png'
                allow_stretch: True
                keep_ratio: True

            BoxLayout:
                size_hint_y: None
                height: 40
                spacing: 10

                Button:
                    text: 'Choose Image'
                    on_press: root.open_filechooser()

                Button:
                    text: 'Save Image'
                    on_press: root.save_image()

                Button:
                    text: 'Save Settings'
                    on_press: root.on_button_click(self)

        # Right Panel: Altered Image and Sliders (all in one panel)
        BoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.6
            spacing: 10

            Label:
                text: 'Altered Image'
                size_hint_y: None
                height: 30

            Image:
                id: image_display
                source: 'IMG_1415.png'
                allow_stretch: True
                keep_ratio: True

            # Sliders Section
            BoxLayout:
                orientation: 'vertical'
                spacing: 10
                size_hint_y: None
                height: 100  # Adjust height as needed

                BoxLayout:
                    size_hint_y: None
                    height: 40
                    spacing: 10

                    Label:
                        text: 'Dither Range:'
                        size_hint_x: 0.5

                    CustomSlider:
                        id: slider1
                        min: 5
                        max: 30
                        value: 18
                        on_value: root.ids.slider1_input.text = str(int(self.value))
                        on_release: root.on_slider1_release(self)
                        size_hint_x: 0.7

                    TextInput:
                        id: slider1_input
                        text: str(slider1.value)
                        multiline: False
                        input_filter: 'int'
                        on_text_validate: root.update_slider1_value(self.text)
                        size_hint_x: 0.3

                BoxLayout:
                    size_hint_y: None
                    height: 40
                    spacing: 10

                    Label:
                        text: 'Color Blend Strength:'
                        size_hint_x: 0.5

                    CustomSlider:
                        id: slider2
                        min: 0
                        max: 100
                        value: 50
                        on_value: root.ids.slider2_input.text = str(int(self.value))
                        on_release: root.on_slider2_release(self)
                        size_hint_x: 0.7

                    TextInput:
                        id: slider2_input
                        text: str(slider2.value)
                        multiline: False
                        input_filter: 'int'
                        on_text_validate: root.update_slider2_value(self.text)
                        size_hint_x: 0.3
